generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model AuditLog {
  id            Int      @id @default(autoincrement())
  timestamp     DateTime @default(now()) @db.Timestamptz(6)
  eventType     String   @db.VarChar(50)
  eventCategory String   @db.VarChar(30)
  severity      String   @db.VarChar(10)
  userId        Int?
  sessionId     String?  @db.VarChar(255)
  ipAddress     String?  @db.VarChar(45)
  resourceType  String?  @db.VarChar(50)
  resourceId    Int?
  leagueId      Int?
  action        String?  @db.VarChar(50)
  description   String?  @db.VarChar(500)
  metadata      Json?
  durationMs    Int?
  success       Boolean  @default(true)
  errorCode     String?  @db.VarChar(50)
  errorMessage  String?
  League        League?  @relation(fields: [leagueId], references: [id])
  User          User?    @relation(fields: [userId], references: [id])

  @@index([eventCategory, timestamp])
  @@index([eventType, timestamp])
  @@index([leagueId, timestamp])
  @@index([resourceType, resourceId])
  @@index([success, severity])
  @@index([timestamp])
  @@index([userId, timestamp])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model Evaluator {
  id                     Int                      @id @default(autoincrement())
  name                   String                   @db.VarChar(255)
  evaluatorTypeId        Int
  leagueId               Int
  entity                 String                   @default("match") @db.VarChar(255)
  createdAt              DateTime                 @db.Timestamptz(6)
  updatedAt              DateTime                 @db.Timestamptz(6)
  deletedAt              DateTime?                @db.Timestamptz(6)
  points                 Int
  config                 Json?
  EvaluatorType          EvaluatorType            @relation(fields: [evaluatorTypeId], references: [id], onDelete: NoAction)
  League                 League                   @relation(fields: [leagueId], references: [id], onDelete: NoAction)
  LeagueSpecialBetSingle LeagueSpecialBetSingle[]
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model EvaluatorType {
  id        Int         @id @default(autoincrement())
  name      String      @db.VarChar(255)
  createdAt DateTime    @db.Timestamptz(6)
  updatedAt DateTime    @db.Timestamptz(6)
  deletedAt DateTime?   @db.Timestamptz(6)
  Evaluator Evaluator[]
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model League {
  id                       Int                        @id @default(autoincrement())
  name                     String                     @db.VarChar(255)
  sportId                  Int
  isActive                 Boolean                    @default(false)
  isTheMostActive          Boolean?                   @default(false)
  seasonFrom               Int
  seasonTo                 Int
  isFinished               Boolean?                   @default(false)
  isPublic                 Boolean                    @default(false)
  createdAt                DateTime                   @db.Timestamptz(6)
  updatedAt                DateTime                   @db.Timestamptz(6)
  deletedAt                DateTime?                  @db.Timestamptz(6)
  chatSuspendedAt          DateTime?                  @db.Timestamptz(6)
  isChatEnabled            Boolean                    @default(false)
  infoText                 String?
  AuditLog                 AuditLog[]
  Evaluator                Evaluator[]
  Sport                    Sport                      @relation(fields: [sportId], references: [id], onDelete: NoAction)
  LeagueMatch              LeagueMatch[]
  LeaguePrize              LeaguePrize[]
  LeagueSpecialBetQuestion LeagueSpecialBetQuestion[]
  LeagueSpecialBetSerie    LeagueSpecialBetSerie[]
  LeagueSpecialBetSingle   LeagueSpecialBetSingle[]
  LeagueTeam               LeagueTeam[]
  LeagueUser               LeagueUser[]
  Message                  Message[]
  TopScorerRankingVersion  TopScorerRankingVersion[]
  UserRequest              UserRequest[]
  UserSetting              UserSetting[]
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model LeagueMatch {
  id               Int                @id @default(autoincrement())
  leagueId         Int
  matchId          Int
  isDoubled        Boolean?
  createdAt        DateTime           @db.Timestamptz(6)
  updatedAt        DateTime           @db.Timestamptz(6)
  deletedAt        DateTime?          @db.Timestamptz(6)
  League           League             @relation(fields: [leagueId], references: [id], onDelete: NoAction)
  Match            Match              @relation(fields: [matchId], references: [id], onDelete: NoAction)
  SentNotification SentNotification[]
  UserBet          UserBet[]
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model LeaguePhase {
  id         Int          @id @default(autoincrement())
  name       String       @db.VarChar(255)
  rank       Int          @default(0)
  createdAt  DateTime     @db.Timestamptz(6)
  updatedAt  DateTime     @db.Timestamptz(6)
  deletedAt  DateTime?    @db.Timestamptz(6)
  LeagueTeam LeagueTeam[]
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model LeaguePlayer {
  id                      Int                       @id @default(autoincrement())
  leagueTeamId            Int
  playerId                Int
  seasonGames             Int?
  seasonGoals             Int?
  seasonAssists           Int?
  clubName                String?                   @db.VarChar(255)
  createdAt               DateTime                  @db.Timestamptz(6)
  updatedAt               DateTime                  @db.Timestamptz(6)
  deletedAt               DateTime?                 @db.Timestamptz(6)
  playoffGames            Int?
  playoffGoals            Int?
  playoffAssists          Int?
  topScorerRanking        Int?
  LeagueTeam              LeagueTeam                @relation(fields: [leagueTeamId], references: [id], onDelete: NoAction)
  Player                  Player                    @relation(fields: [playerId], references: [id], onDelete: NoAction)
  LeagueSpecialBetSingle  LeagueSpecialBetSingle[]
  MatchScorer             MatchScorer[]
  TopScorerRankingVersion TopScorerRankingVersion[]
  UserBet                 UserBet[]
  UserSpecialBetSingle    UserSpecialBetSingle[]
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model LeaguePrize {
  id        Int       @id @default(autoincrement())
  leagueId  Int
  rank      Int
  amount    Int
  currency  String    @default("CZK") @db.VarChar(3)
  label     String?   @db.VarChar(100)
  type      String    @default("prize") @db.VarChar(10)
  createdAt DateTime  @db.Timestamptz(6)
  updatedAt DateTime  @db.Timestamptz(6)
  deletedAt DateTime? @db.Timestamptz(6)
  League    League    @relation(fields: [leagueId], references: [id], onDelete: Cascade)

  @@unique([leagueId, rank, type, deletedAt])
  @@index([leagueId, deletedAt])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model LeagueSpecialBetQuestion {
  id                     Int                      @id @default(autoincrement())
  leagueId               Int
  text                   String
  dateTime               DateTime                 @db.Timestamptz(6)
  result                 Boolean?
  isEvaluated            Boolean                  @default(false)
  createdAt              DateTime                 @db.Timestamptz(6)
  updatedAt              DateTime                 @db.Timestamptz(6)
  deletedAt              DateTime?                @db.Timestamptz(6)
  League                 League                   @relation(fields: [leagueId], references: [id], onDelete: NoAction)
  UserSpecialBetQuestion UserSpecialBetQuestion[]
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model LeagueSpecialBetSerie {
  id                                                      Int                   @id @default(autoincrement())
  leagueId                                                Int
  specialBetSerieId                                       Int
  dateTime                                                DateTime              @db.Timestamptz(6)
  homeTeamId                                              Int
  awayTeamId                                              Int
  homeTeamScore                                           Int?
  awayTeamScore                                           Int?
  isEvaluated                                             Boolean               @default(false)
  createdAt                                               DateTime              @db.Timestamptz(6)
  updatedAt                                               DateTime              @db.Timestamptz(6)
  deletedAt                                               DateTime?             @db.Timestamptz(6)
  LeagueTeam_LeagueSpecialBetSerie_awayTeamIdToLeagueTeam LeagueTeam            @relation("LeagueSpecialBetSerie_awayTeamIdToLeagueTeam", fields: [awayTeamId], references: [id], onDelete: NoAction)
  LeagueTeam_LeagueSpecialBetSerie_homeTeamIdToLeagueTeam LeagueTeam            @relation("LeagueSpecialBetSerie_homeTeamIdToLeagueTeam", fields: [homeTeamId], references: [id], onDelete: NoAction)
  League                                                  League                @relation(fields: [leagueId], references: [id], onDelete: NoAction)
  SpecialBetSerie                                         SpecialBetSerie       @relation(fields: [specialBetSerieId], references: [id], onDelete: NoAction)
  UserSpecialBetSerie                                     UserSpecialBetSerie[]

  @@index([isEvaluated, deletedAt])
  @@index([leagueId, deletedAt])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model LeagueSpecialBetSingle {
  id                                 Int                                  @id @default(autoincrement())
  leagueId                           Int
  specialBetSingleId                 Int?
  name                               String                               @db.VarChar(255)
  specialBetTeamResultId             Int?
  specialBetPlayerResultId           Int?
  specialBetValue                    Int?
  points                             Int
  dateTime                           DateTime                             @db.Timestamptz(6)
  isEvaluated                        Boolean                              @default(false)
  createdAt                          DateTime                             @db.Timestamptz(6)
  updatedAt                          DateTime                             @db.Timestamptz(6)
  deletedAt                          DateTime?                            @db.Timestamptz(6)
  evaluatorId                        Int
  group                              String?                              @db.VarChar(255)
  Evaluator                          Evaluator                            @relation(fields: [evaluatorId], references: [id], onDelete: NoAction)
  League                             League                               @relation(fields: [leagueId], references: [id], onDelete: NoAction)
  LeaguePlayer                       LeaguePlayer?                        @relation(fields: [specialBetPlayerResultId], references: [id])
  SpecialBetSingle                   SpecialBetSingle?                    @relation(fields: [specialBetSingleId], references: [id], onDelete: NoAction)
  LeagueTeam                         LeagueTeam?                          @relation(fields: [specialBetTeamResultId], references: [id])
  LeagueSpecialBetSingleTeamAdvanced LeagueSpecialBetSingleTeamAdvanced[]
  UserSpecialBetSingle               UserSpecialBetSingle[]

  @@index([evaluatorId])
  @@index([isEvaluated, deletedAt])
  @@index([leagueId, deletedAt])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model LeagueSpecialBetSingleTeamAdvanced {
  id                       Int                    @id @default(autoincrement())
  leagueSpecialBetSingleId Int
  leagueTeamId             Int
  createdAt                DateTime               @db.Timestamptz(6)
  updatedAt                DateTime               @db.Timestamptz(6)
  deletedAt                DateTime?              @db.Timestamptz(6)
  LeagueSpecialBetSingle   LeagueSpecialBetSingle @relation(fields: [leagueSpecialBetSingleId], references: [id], onDelete: Cascade)
  LeagueTeam               LeagueTeam             @relation(fields: [leagueTeamId], references: [id], onDelete: NoAction)

  @@unique([leagueSpecialBetSingleId, leagueTeamId, deletedAt])
  @@index([leagueSpecialBetSingleId])
  @@index([leagueTeamId])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model LeagueTeam {
  id                                                                 Int                                  @id @default(autoincrement())
  leagueId                                                           Int
  teamId                                                             Int
  group                                                              String?                              @db.VarChar(255)
  leaguePhaseAchievedId                                              Int?
  createdAt                                                          DateTime                             @db.Timestamptz(6)
  updatedAt                                                          DateTime                             @db.Timestamptz(6)
  deletedAt                                                          DateTime?                            @db.Timestamptz(6)
  LeaguePlayer                                                       LeaguePlayer[]
  LeagueSpecialBetSerie_LeagueSpecialBetSerie_awayTeamIdToLeagueTeam LeagueSpecialBetSerie[]              @relation("LeagueSpecialBetSerie_awayTeamIdToLeagueTeam")
  LeagueSpecialBetSerie_LeagueSpecialBetSerie_homeTeamIdToLeagueTeam LeagueSpecialBetSerie[]              @relation("LeagueSpecialBetSerie_homeTeamIdToLeagueTeam")
  LeagueSpecialBetSingle                                             LeagueSpecialBetSingle[]
  LeagueSpecialBetSingleTeamAdvanced                                 LeagueSpecialBetSingleTeamAdvanced[]
  League                                                             League                               @relation(fields: [leagueId], references: [id], onDelete: NoAction)
  LeaguePhase                                                        LeaguePhase?                         @relation(fields: [leaguePhaseAchievedId], references: [id], onDelete: NoAction)
  Team                                                               Team                                 @relation(fields: [teamId], references: [id], onDelete: NoAction)
  Match_Match_awayTeamIdToLeagueTeam                                 Match[]                              @relation("Match_awayTeamIdToLeagueTeam")
  Match_Match_homeTeamIdToLeagueTeam                                 Match[]                              @relation("Match_homeTeamIdToLeagueTeam")
  UserSpecialBetSingle                                               UserSpecialBetSingle[]
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model LeagueUser {
  id                     Int                      @id @default(autoincrement())
  leagueId               Int
  userId                 Int
  paid                   Boolean                  @default(false)
  active                 Boolean?                 @default(true)
  admin                  Boolean?                 @default(false)
  createdAt              DateTime                 @db.Timestamptz(6)
  updatedAt              DateTime                 @db.Timestamptz(6)
  deletedAt              DateTime?                @db.Timestamptz(6)
  lastChatReadAt         DateTime?                @db.Timestamptz(6)
  League                 League                   @relation(fields: [leagueId], references: [id], onDelete: NoAction)
  User                   User                     @relation(fields: [userId], references: [id], onDelete: NoAction)
  Message                Message[]
  UserBet                UserBet[]
  UserSetting            UserSetting[]
  UserSpecialBetQuestion UserSpecialBetQuestion[]
  UserSpecialBetSerie    UserSpecialBetSerie[]
  UserSpecialBetSingle   UserSpecialBetSingle[]

  @@unique([leagueId, userId, deletedAt])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model Match {
  id                                      Int           @id @default(autoincrement())
  gameNumber                              Int?
  dateTime                                DateTime      @db.Timestamptz(6)
  homeTeamId                              Int
  awayTeamId                              Int
  homeRegularScore                        Int?
  awayRegularScore                        Int?
  homeFinalScore                          Int?
  awayFinalScore                          Int?
  isOvertime                              Boolean?
  isShootout                              Boolean?
  isEvaluated                             Boolean       @default(false)
  isPlayoffGame                           Boolean       @default(false)
  externalId                              Int?
  createdAt                               DateTime      @db.Timestamptz(6)
  updatedAt                               DateTime      @db.Timestamptz(6)
  deletedAt                               DateTime?     @db.Timestamptz(6)
  matchPhaseId                            Int?
  LeagueMatch                             LeagueMatch[]
  LeagueTeam_Match_awayTeamIdToLeagueTeam LeagueTeam    @relation("Match_awayTeamIdToLeagueTeam", fields: [awayTeamId], references: [id], onDelete: NoAction)
  LeagueTeam_Match_homeTeamIdToLeagueTeam LeagueTeam    @relation("Match_homeTeamIdToLeagueTeam", fields: [homeTeamId], references: [id], onDelete: NoAction)
  MatchPhase                              MatchPhase?   @relation(fields: [matchPhaseId], references: [id])
  MatchScorer                             MatchScorer[]
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model MatchPhase {
  id        Int       @id @default(autoincrement())
  name      String    @db.VarChar(255)
  rank      Int       @default(0)
  bestOf    Int?
  createdAt DateTime  @db.Timestamptz(6)
  updatedAt DateTime  @db.Timestamptz(6)
  deletedAt DateTime? @db.Timestamptz(6)
  Match     Match[]
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model MatchScorer {
  id            Int          @id @default(autoincrement())
  matchId       Int
  scorerId      Int
  numberOfGoals Int
  createdAt     DateTime     @db.Timestamptz(6)
  updatedAt     DateTime     @db.Timestamptz(6)
  deletedAt     DateTime?    @db.Timestamptz(6)
  Match         Match        @relation(fields: [matchId], references: [id], onDelete: NoAction)
  LeaguePlayer  LeaguePlayer @relation(fields: [scorerId], references: [id], onDelete: NoAction)
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model Message {
  id           Int        @id @default(autoincrement())
  leagueId     Int
  leagueUserId Int
  text         String
  replyToId    Int?
  createdAt    DateTime   @db.Timestamptz(6)
  updatedAt    DateTime   @db.Timestamptz(6)
  deletedAt    DateTime?  @db.Timestamptz(6)
  League       League     @relation(fields: [leagueId], references: [id], onDelete: NoAction)
  LeagueUser   LeagueUser @relation(fields: [leagueUserId], references: [id], onDelete: NoAction)
  ReplyTo      Message?   @relation("MessageReplies", fields: [replyToId], references: [id], onDelete: SetNull)
  Replies      Message[]  @relation("MessageReplies")

  @@index([leagueId, createdAt])
  @@index([replyToId])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model PasswordResetToken {
  id        Int       @id @default(autoincrement())
  userId    Int
  token     String    @unique @db.VarChar(255)
  expiresAt DateTime  @db.Timestamptz(6)
  createdAt DateTime  @db.Timestamptz(6)
  usedAt    DateTime? @db.Timestamptz(6)
  User      User      @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([token])
  @@index([userId, expiresAt])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model Player {
  id           Int            @id @default(autoincrement())
  firstName    String?        @db.VarChar(255)
  lastName     String?
  isActive     Boolean        @default(true)
  position     String?        @db.VarChar(255)
  externalId   Int?
  createdAt    DateTime       @db.Timestamptz(6)
  updatedAt    DateTime       @db.Timestamptz(6)
  deletedAt    DateTime?      @db.Timestamptz(6)
  LeaguePlayer LeaguePlayer[]
}

model PushSubscription {
  id        Int       @id @default(autoincrement())
  userId    Int
  endpoint  String
  p256dh    String    @db.VarChar(255)
  auth      String    @db.VarChar(255)
  userAgent String?   @db.VarChar(500)
  createdAt DateTime  @default(now()) @db.Timestamptz(6)
  updatedAt DateTime  @db.Timestamptz(6)
  deletedAt DateTime? @db.Timestamptz(6)
  User      User      @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([userId, endpoint, deletedAt])
  @@index([userId, deletedAt])
}

model SentNotification {
  id            Int         @id @default(autoincrement())
  userId        Int
  leagueMatchId Int
  sentAt        DateTime    @default(now()) @db.Timestamptz(6)
  LeagueMatch   LeagueMatch @relation(fields: [leagueMatchId], references: [id], onDelete: Cascade)
  User          User        @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([userId, leagueMatchId])
  @@index([leagueMatchId])
  @@index([userId])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model SequelizeMeta {
  name String @id @db.VarChar(255)
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model SpecialBetSerie {
  id                    Int                     @id @default(autoincrement())
  bestOf                Int
  name                  String                  @db.VarChar(255)
  createdAt             DateTime                @db.Timestamptz(6)
  updatedAt             DateTime                @db.Timestamptz(6)
  deletedAt             DateTime?               @db.Timestamptz(6)
  LeagueSpecialBetSerie LeagueSpecialBetSerie[]
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model SpecialBetSingle {
  id                     Int                      @id @default(autoincrement())
  sportId                Int
  specialBetSingleTypeId Int
  name                   String                   @db.VarChar(255)
  createdAt              DateTime                 @db.Timestamptz(6)
  updatedAt              DateTime                 @db.Timestamptz(6)
  deletedAt              DateTime?                @db.Timestamptz(6)
  LeagueSpecialBetSingle LeagueSpecialBetSingle[]
  SpecialBetSingleType   SpecialBetSingleType     @relation(fields: [specialBetSingleTypeId], references: [id], onDelete: NoAction)
  Sport                  Sport                    @relation(fields: [sportId], references: [id], onDelete: NoAction)
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model SpecialBetSingleType {
  id               Int                @id @default(autoincrement())
  name             String             @default("") @db.VarChar(255)
  createdAt        DateTime           @db.Timestamptz(6)
  updatedAt        DateTime           @db.Timestamptz(6)
  deletedAt        DateTime?          @db.Timestamptz(6)
  SpecialBetSingle SpecialBetSingle[]
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model Sport {
  id               Int                @id @default(autoincrement())
  name             String             @db.VarChar(255)
  createdAt        DateTime           @db.Timestamptz(6)
  updatedAt        DateTime           @db.Timestamptz(6)
  deletedAt        DateTime?          @db.Timestamptz(6)
  League           League[]
  SpecialBetSingle SpecialBetSingle[]
  Team             Team[]
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model Team {
  id         Int          @id @default(autoincrement())
  name       String       @db.VarChar(255)
  nickname   String?      @db.VarChar(255)
  shortcut   String       @db.VarChar(255)
  flagIcon   String?      @db.VarChar(255)
  sportId    Int
  externalId Int?
  createdAt  DateTime     @db.Timestamptz(6)
  updatedAt  DateTime     @db.Timestamptz(6)
  deletedAt  DateTime?    @db.Timestamptz(6)
  flagType   String?      @db.VarChar(50)
  LeagueTeam LeagueTeam[]
  Sport      Sport        @relation(fields: [sportId], references: [id], onDelete: NoAction)
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model TopScorerRankingVersion {
  id              Int          @id @default(autoincrement())
  leagueId        Int
  leaguePlayerId  Int
  ranking         Int
  effectiveFrom   DateTime     @db.Timestamptz(6)
  effectiveTo     DateTime?    @db.Timestamptz(6)
  createdAt       DateTime     @db.Timestamptz(6)
  createdByUserId Int?
  User            User?        @relation(fields: [createdByUserId], references: [id])
  League          League       @relation(fields: [leagueId], references: [id], onDelete: NoAction)
  LeaguePlayer    LeaguePlayer @relation(fields: [leaguePlayerId], references: [id], onDelete: NoAction)

  @@index([leagueId, effectiveFrom])
  @@index([leagueId, effectiveTo])
  @@index([leaguePlayerId, effectiveFrom])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model User {
  id                      Int                       @id @default(autoincrement())
  firstName               String                    @db.VarChar(255)
  lastName                String                    @db.VarChar(255)
  username                String                    @db.VarChar(255)
  email                   String                    @unique @db.VarChar(255)
  mobileNumber            String?                   @db.VarChar(255)
  password                String                    @db.VarChar(255)
  salt                    String?                   @db.VarChar(255)
  pushId                  String?                   @db.VarChar(255)
  isSuperadmin            Boolean                   @default(false)
  createdAt               DateTime                  @db.Timestamptz(6)
  updatedAt               DateTime                  @db.Timestamptz(6)
  deletedAt               DateTime?                 @db.Timestamptz(6)
  notifyHours             Int                       @default(0)
  avatarUrl               String?                   @db.VarChar(500)
  AuditLog                AuditLog[]
  LeagueUser              LeagueUser[]
  PasswordResetToken      PasswordResetToken[]
  PushSubscription        PushSubscription[]
  SentNotification        SentNotification[]
  TopScorerRankingVersion TopScorerRankingVersion[]
  UserRequest             UserRequest[]
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model UserBet {
  id            Int           @id @default(autoincrement())
  leagueMatchId Int
  leagueUserId  Int
  dateTime      DateTime      @db.Timestamptz(6)
  homeScore     Int           @default(0)
  awayScore     Int           @default(0)
  homeAdvanced  Boolean?
  scorerId      Int?
  totalPoints   Int           @default(0)
  overtime      Boolean       @default(false)
  createdAt     DateTime      @db.Timestamptz(6)
  updatedAt     DateTime      @db.Timestamptz(6)
  deletedAt     DateTime?     @db.Timestamptz(6)
  noScorer      Boolean?
  LeagueMatch   LeagueMatch   @relation(fields: [leagueMatchId], references: [id], onDelete: NoAction)
  LeagueUser    LeagueUser    @relation(fields: [leagueUserId], references: [id], onDelete: Cascade)
  LeaguePlayer  LeaguePlayer? @relation(fields: [scorerId], references: [id])

  @@unique([leagueMatchId, leagueUserId, deletedAt])
  @@index([leagueMatchId, deletedAt])
  @@index([leagueMatchId, leagueUserId, deletedAt])
  @@index([leagueUserId, deletedAt])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model UserRequest {
  id        Int       @id @default(autoincrement())
  userId    Int
  leagueId  Int
  decided   Boolean   @default(false)
  accepted  Boolean   @default(false)
  createdAt DateTime  @db.Timestamptz(6)
  updatedAt DateTime  @db.Timestamptz(6)
  deletedAt DateTime? @db.Timestamptz(6)
  League    League    @relation(fields: [leagueId], references: [id], onDelete: NoAction)
  User      User      @relation(fields: [userId], references: [id], onDelete: NoAction)
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model UserSetting {
  id                            Int        @id @default(autoincrement())
  leagueUserId                  Int
  leagueId                      Int
  emailBetNotification          Boolean?   @default(false)
  emailBetNotificationValue     Int?       @default(0)
  emailRankingNotification      Boolean?   @default(false)
  emailRankingNotificationValue Int?       @default(0)
  createdAt                     DateTime   @db.Timestamptz(6)
  updatedAt                     DateTime   @db.Timestamptz(6)
  deletedAt                     DateTime?  @db.Timestamptz(6)
  League                        League     @relation(fields: [leagueId], references: [id], onDelete: NoAction)
  LeagueUser                    LeagueUser @relation(fields: [leagueUserId], references: [id], onDelete: NoAction)
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model UserSpecialBetQuestion {
  id                         Int                      @id @default(autoincrement())
  leagueSpecialBetQuestionId Int
  leagueUserId               Int
  userBet                    Boolean?
  totalPoints                Int                      @default(0)
  dateTime                   DateTime                 @db.Timestamptz(6)
  createdAt                  DateTime                 @db.Timestamptz(6)
  updatedAt                  DateTime                 @db.Timestamptz(6)
  deletedAt                  DateTime?                @db.Timestamptz(6)
  LeagueSpecialBetQuestion   LeagueSpecialBetQuestion @relation(fields: [leagueSpecialBetQuestionId], references: [id], onDelete: NoAction)
  LeagueUser                 LeagueUser               @relation(fields: [leagueUserId], references: [id], onDelete: NoAction)

  @@unique([leagueSpecialBetQuestionId, leagueUserId, deletedAt])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model UserSpecialBetSerie {
  id                      Int                   @id @default(autoincrement())
  leagueSpecialBetSerieId Int
  leagueUserId            Int
  homeTeamScore           Int?
  awayTeamScore           Int?
  totalPoints             Int                   @default(0)
  dateTime                DateTime              @db.Timestamptz(6)
  createdAt               DateTime              @db.Timestamptz(6)
  updatedAt               DateTime              @db.Timestamptz(6)
  deletedAt               DateTime?             @db.Timestamptz(6)
  LeagueSpecialBetSerie   LeagueSpecialBetSerie @relation(fields: [leagueSpecialBetSerieId], references: [id], onDelete: NoAction)
  LeagueUser              LeagueUser            @relation(fields: [leagueUserId], references: [id], onDelete: NoAction)

  @@unique([leagueSpecialBetSerieId, leagueUserId, deletedAt])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model UserSpecialBetSingle {
  id                       Int                    @id @default(autoincrement())
  leagueSpecialBetSingleId Int
  leagueUserId             Int
  teamResultId             Int?
  playerResultId           Int?
  value                    Int?
  totalPoints              Int                    @default(0)
  dateTime                 DateTime               @db.Timestamptz(6)
  createdAt                DateTime               @db.Timestamptz(6)
  updatedAt                DateTime               @db.Timestamptz(6)
  deletedAt                DateTime?              @db.Timestamptz(6)
  LeagueSpecialBetSingle   LeagueSpecialBetSingle @relation(fields: [leagueSpecialBetSingleId], references: [id], onDelete: NoAction)
  LeagueUser               LeagueUser             @relation(fields: [leagueUserId], references: [id], onDelete: NoAction)
  LeaguePlayer             LeaguePlayer?          @relation(fields: [playerResultId], references: [id])
  LeagueTeam               LeagueTeam?            @relation(fields: [teamResultId], references: [id])

  @@unique([leagueSpecialBetSingleId, leagueUserId, deletedAt])
}
